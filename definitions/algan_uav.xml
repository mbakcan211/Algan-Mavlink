<?xml version="1.0"?>
<mavlink>
    <include>common.xml</include>

    <version>1</version>
    <dialect>100</dialect>

    <enums>
        <enum name="ALGAN_MISSION_MODE">
            <description>Custom mission modes for Algan UAV.</description>
            <entry value="0" name="ALGAN_MODE_IDLE">
                <description>System is booting or waiting.</description>
            </entry>
            <entry value="1" name="ALGAN_MODE_SEARCHING">
                <description>Autonomous search pattern active.</description>
            </entry>
            <entry value="2" name="ALGAN_MODE_TRACKING">
                <description>AI has locked onto a target.</description>
            </entry>
            <entry value="3" name="ALGAN_MODE_RETURNING">
                <description>RTB initiated due to low battery or command.</description>
            </entry>
        </enum>
    </enums>

    <messages>
        
        <message id="50001" name="ALGAN_AI_DETECTION">
            <description>Data from the onboard AI (Hailo/Jetson) about detected objects.</description>
            <field type="uint64_t" name="timestamp">Timestamp (microseconds since boot)</field>
            <field type="uint8_t" name="target_id">Unique ID of the tracked object</field>
            <field type="uint8_t" name="class_id">Class ID (e.g., 0=Person, 1=Vehicle)</field>
            <field type="float" name="confidence">Detection confidence (0.0 to 1.0)</field>
            <field type="int32_t" name="lat">Latitude of target (deg * 1E7)</field>
            <field type="int32_t" name="lon">Longitude of target (deg * 1E7)</field>
        </message>

        <message id="50002" name="ALGAN_WIFI_SCAN">
            <description>Reports a Wi-Fi device detected by the sniffer module.</description>
            <field type="uint32_t" name="timestamp">Timestamp (ms)</field>
            <field type="int8_t" name="rssi">Signal strength in dBm</field>
            <field type="uint8_t[6]" name="mac_addr">MAC address of the source</field>
            <field type="char[32]" name="ssid">SSID name (null terminated)</field>
        </message>

        <message id="50003" name="ALGAN_SENSORS_RAW">
            <description>Raw sensor data for debugging embedded filters.</description>
            <field type="uint64_t" name="timestamp_us">Timestamp (microseconds)</field>
            <field type="int16_t[3]" name="acc_raw">Raw accelerometer (X, Y, Z)</field>
            <field type="int16_t[3]" name="gyro_raw">Raw gyroscope (X, Y, Z)</field>
            <field type="uint8_t" name="status" enum="ALGAN_MISSION_MODE">Current custom mode</field>
        </message>

    </messages>
</mavlink>